[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "",
    "section": "",
    "text": "Code\n\n\n\n\nAlltime Athletics\nAn analysis of the all-time best performances in track and field, provided by Peter Larsson at Alltime Athletics."
  },
  {
    "objectID": "notebooks/world_records.html",
    "href": "notebooks/world_records.html",
    "title": "World Records",
    "section": "",
    "text": "Code\nimport altair as alt\nimport polars as pl\nfrom alltime_athletics_python.io import download_data, import_running_only_events\nfrom camminapy.plot.altair_config import altair_theme\n\nfrom alltime_athletics_viz.show import show_df\n\nalt.data_transformers.disable_max_rows()\naltair_theme()\n\n\n\n\nCode\n# if not os.path.exists(\"data\"):\n#     download_data()\ndf = import_running_only_events(\"../data\")\n\n\n\n\nCode\nshow_df(\n    df.filter(pl.col(\"rank\") == 1)\n    .filter(pl.col(\"event type\") == \"standard\")\n    .select(\"event\", \"name\", \"result\", \"sex\")\n    .pivot(\n        index=\"event\",\n        values=[\"name\", \"result\"],\n        columns=\"sex\",\n        aggregate_function=\"first\",\n    )\n    .select(\n        \"event\",\n        \"name_sex_female\",\n        \"result_sex_female\",\n        \"name_sex_male\",\n        \"result_sex_male\",\n    )\n)\n\n\n\n\n\n\nevent\nname_sex_female\nresult_sex_female\nname_sex_male\nresult_sex_male\n\n\n\n\n0\n100 metres\nFlorence Griffith-Joyner\n10.49\nUsain Bolt\n9.58\n\n\n1\n100m/110m hurdles\nOluwatobiloba Amusan\n12.12\nAries Merritt\n12.80\n\n\n2\n200 metres\nFlorence Griffith-Joyner\n21.34\nUsain Bolt\n19.19\n\n\n3\n400 metres\nMarita Koch\n47.60\nWayde van Niekerk\n43.03\n\n\n4\n400m hurdles\nSydney McLaughlin\n50.68\nKarsten Warholm\n45.94\n\n\n5\n800 metres\nJarmila Kratochvílová\n1:53.28\nDavid Rudisha\n1:40.91\n\n\n6\n1500 metres\nFaith Kipyegon\n3:49.11\nHicham El Guerrouj\n3:26.00\n\n\n7\n1 Mile\nSifan Hassan\n4:12.33\nHicham El Guerrouj\n3:43.13\n\n\n8\n3000 metres\nWang Junxia\n8:06.11\nDaniel Komen\n7:20.67\n\n\n9\n3000m steeplechase\nBeatrice Chepkoech\n8:44.32\nSaif Saeed Shaheen\n7:53.63\n\n\n10\n5000 metres\nLetesenbet Gidey\n14:06.62\nJoshua Cheptegei\n12:35.36\n\n\n11\n10000 metres\nLetesenbet Gidey\n29:01.03\nJoshua Cheptegei\n26:11.00\n\n\n12\n20 km race walk\nYelena Lashmanova\n1:23:39\nYusuke Suzuki\n1:16:36\n\n\n13\nhalf-marathon\nLetesenbet Gidey\n62:52\nJacob Kiplimo\n57:31\n\n\n14\nmarathon\nBrigid Kosgei\n2:14:04\nEliud Kipchoge\n2:01:09\n\n\n15\n50 km race walk\nYelena Lashmanova\n3:50:42\nYohann Diniz\n3:32:33\n\n\n\n\n\n\n\nCode\nworld_records = (\n    df.filter(pl.col(\"event\").str.contains(\"walk\") == False)\n    .filter(pl.col(\"event type\") == \"standard\")\n    .sort(\"sex\", \"distance\", \"event\", \"date of event\")\n    .with_columns(\n        pl.col(\"result seconds\")\n        .cummin()\n        .over(\"sex\", \"event\")\n        .alias(\"world record time\")\n    )\n    .filter(pl.col(\"result seconds\") == pl.col(\"world record time\"))\n    .groupby(\"sex\", \"event\", \"result seconds\", maintain_order=True)\n    .first()\n    .with_columns(\n        (\n            100\n            * pl.col(\"result seconds\")\n            / pl.col(\"result seconds\").min().over(\"sex\", \"event\")\n        ).alias(\"percent of wr\")\n    )\n)\n\nworld_records = pl.concat(\n    [\n        world_records,\n        world_records.filter(pl.col(\"rank\") == 1).with_columns(\n            [\n                pl.lit(\"2023-06-07\")\n                .str.strptime(pl.Date, format=\"%Y-%m-%d\")\n                .alias(\"date of event\"),\n                pl.lit(-1).cast(pl.Int64).alias(\"rank\"),\n            ]\n        ),\n    ]\n).with_columns(pl.col(\"sex\").apply(lambda s: s.title()))\n\n\n\n\nCode\nlegend_selection = alt.selection_point(fields=[\"event\"], bind=\"legend\")\nlegend_selection_empty = alt.selection_point(\n    fields=[\"event\"], bind=\"legend\", empty=False\n)\n\nbase = (\n    alt.Chart(world_records.to_pandas())\n    .encode(\n        x=alt.X(\"date of event:T\")\n        .scale(domain=(\"1950-01-01\", \"2026-01-01\"))\n        .title(\"Year\"),\n        y=alt.Y(\"percent of wr:Q\")\n        .scale(domain=(100, 110))\n        .axis(values=list(range(100, 120, 2)))\n        .title(\"Time in % of current WR\"),\n        color=alt.Color(\n            \"event:N\",\n            sort=world_records.sort(\"distance\")[\"event\"]\n            .unique(maintain_order=True)\n            .to_list(),\n        ).scale(scheme=\"dark2\"),\n        # strokeDash=\"sex:N\",\n        opacity=alt.condition(legend_selection, alt.value(1), alt.value(0)),\n    )\n    .properties(width=1400, height=500)\n    .add_params(legend_selection)\n    .add_params(legend_selection_empty)\n)\n\nbase_no_endpoint = base.transform_filter(alt.datum[\"rank\"] &gt; 0)\n\ntext = base_no_endpoint.encode(\n    text=\"name:N\",\n    opacity=alt.condition(legend_selection_empty, alt.value(0.9), alt.value(0.0)),\n)\n\n\nalt.layer(\n    base.mark_line(interpolate=\"step-after\", clip=True, strokeWidth=3),\n    base_no_endpoint.mark_point(filled=True, clip=True, size=100),\n    text.mark_text(clip=True, fontSize=14, angle=270 + 45, align=\"left\", dx=15),\n).facet(\n    row=alt.Row(\"sex:N\").title(\"\").header(labelAngle=0),\n    title=\"World Record Progression\",\n).resolve_scale(\n    x=\"independent\"\n)\n\n\n\n\n\n\n\n\n\n\nCode\n(\n    world_records.with_columns(\n        pl.col(\"date of event\")\n        .shift_and_fill(\n            periods=-1,\n            fill_value=pl.lit(\"2023-06-05\").str.strptime(pl.Date, format=\"%Y-%m-%d\"),\n        )\n        .over(\"sex\", \"event\")\n        .alias(\"wr valid until\")\n    )\n    .with_columns(\n        (pl.col(\"wr valid until\") - pl.col(\"date of event\")).alias(\"wr duration\")\n    )\n    .filter(pl.col(\"sex\") == \"Male\")\n    # .filter(pl.col(\"event\") == \"marathon\")\n    .drop(\"has hurdles\", \"event type\", \"distance\", \"on track\")\n    .filter(pl.col(\"wr duration\") == pl.col(\"wr duration\").max().over(\"sex\", \"event\"))\n    .sort(\"wr duration\")\n)\n\n\n\nshape: (14, 19)\n\n\n\nsex\nevent\nresult seconds\nrank\nrank in event\nname\nnationality\ndate of birth\nresult\nwind\ndate of event\nlocation of event\ndistance type\nfile\nage at event in years\nworld record time\npercent of wr\nwr valid until\nwr duration\n\n\nstr\nstr\nf64\ni64\nstr\nstr\nstr\ndate\nstr\nstr\ndate\nstr\nstr\nstr\nf64\nf64\nf64\ndate\nduration[ms]\n\n\n\n\n\"Male\"\n\"half-marathon\"\n3503.0\n14\n\"1\"\n\"Zersenay Tades…\n\"ERI\"\n1982-02-08\n\"58:23\"\nnull\n2010-03-21\n\"Lisboa\"\n\"long distance\"\n\"../data/men/st…\n28.131507\n3503.0\n101.50681\n2018-10-28\n3143d\n\n\n\"Male\"\n\"marathon\"\n7714.0\n2015\n\"1.0\"\n\"Derek Clayton\"\n\"AUS\"\n1942-11-17\n\"2:08:34\"\nnull\n1969-05-30\n\"Antwerp\"\n\"long distance\"\n\"../data/men/st…\n26.550685\n7714.0\n106.121887\n1981-12-06\n4573d\n\n\n\"Male\"\n\"100m/110m hurd…\n12.91\n12\n\"1\"\n\"Colin Jackson\"\n\"GBR\"\n1967-02-18\n\"12.91\"\n\"+0.5\"\n1993-08-20\n\"Stuttgart\"\n\"sprint\"\n\"../data/men/st…\n26.520548\n12.91\n100.859375\n2006-07-11\n4708d\n\n\n\"Male\"\n\"100 metres\"\n9.95\n610\n\"1\"\n\"Jim Hines\"\n\"USA\"\n1946-09-10\n\"9.95A\"\n\"+0.3\"\n1968-10-14\n\"Ciudad de Méxi…\n\"sprint\"\n\"../data/men/st…\n22.109589\n9.95\n103.862213\n1983-07-03\n5375d\n\n\n\"Male\"\n\"10000 metres\"\n1577.53\n2\n\"1\"\n\"Kenenisa Bekel…\n\"ETH\"\n1982-06-13\n\"26:17.53\"\nnull\n2005-08-26\n\"Bruxelles\"\n\"long distance\"\n\"../data/men/st…\n23.219178\n1577.53\n100.415659\n2020-10-07\n5521d\n\n\n\"Male\"\n\"800 metres\"\n101.73\n10\n\"1\"\n\"Sebastian Coe\"\n\"GBR\"\n1956-09-29\n\"1:41.73\"\nnull\n1981-06-10\n\"Firenze\"\n\"middle distanc…\n\"../data/men/st…\n24.712329\n101.73\n100.812605\n1997-08-13\n5908d\n\n\n\"Male\"\n\"5000 metres\"\n757.35\n2\n\"1.0\"\n\"Kenenisa Bekel…\n\"ETH\"\n1982-06-13\n\"12:37.35\"\nnull\n2004-05-31\n\"Hengelo\"\n\"long distance\"\n\"../data/men/st…\n21.980822\n757.35\n100.263451\n2020-08-14\n5919d\n\n\n\"Male\"\n\"200 metres\"\n19.72\n59\n\"1\"\n\"Pietro Mennea\"\n\"ITA\"\n1952-06-28\n\"19.72A\"\n\"+1.8\"\n1979-09-12\n\"Ciudad de Méxi…\n\"sprint\"\n\"../data/men/st…\n27.224658\n19.72\n102.761855\n1996-06-23\n6129d\n\n\n\"Male\"\n\"3000m steeplec…\n473.63\n1\n\"1\"\n\"Saif Saeed Sha…\n\"QAT\"\n1982-10-15\n\"7:53.63\"\nnull\n2004-09-03\n\"Bruxelles\"\n\"middle distanc…\n\"../data/men/st…\n21.90137\n473.63\n100.0\n2023-06-07\n6851d\n\n\n\"Male\"\n\"400 metres\"\n43.86\n48\n\"1\"\n\"Lee Evans\"\n\"USA\"\n1947-02-25\n\"43.86A\"\nnull\n1968-10-18\n\"Ciudad de Méxi…\n\"sprint\"\n\"../data/men/st…\n21.660274\n43.86\n101.928887\n1988-08-17\n7243d\n\n\n\"Male\"\n\"1 Mile\"\n223.13\n1\n\"1\"\n\"Hicham El Guer…\n\"MAR\"\n1974-09-14\n\"3:43.13\"\nnull\n1999-07-07\n\"Roma\"\n\"middle distanc…\n\"../data/men/st…\n24.827397\n223.13\n100.0\n2023-06-07\n8736d\n\n\n\"Male\"\n\"1500 metres\"\n206.0\n1\n\"1\"\n\"Hicham El Guer…\n\"MAR\"\n1974-09-14\n\"3:26.00\"\nnull\n1998-07-14\n\"Roma\"\n\"middle distanc…\n\"../data/men/st…\n23.846575\n206.0\n100.0\n2023-06-07\n9094d\n\n\n\"Male\"\n\"3000 metres\"\n440.67\n1\n\"1\"\n\"Daniel Komen\"\n\"KEN\"\n1976-05-17\n\"7:20.67\"\nnull\n1996-09-01\n\"Rieti\"\n\"middle distanc…\n\"../data/men/st…\n20.306849\n440.67\n100.0\n2023-06-07\n9775d\n\n\n\"Male\"\n\"400m hurdles\"\n46.78\n6\n\"1\"\n\"Kevin Young\"\n\"USA\"\n1966-09-16\n\"46.78\"\nnull\n1992-08-06\n\"Barcelona\"\n\"sprint\"\n\"../data/men/st…\n25.906849\n46.78\n101.828472\n2021-07-01\n10556d\n\n\n\n\n\n\n\n\nCode\ndf.groupby(\"sex\", \"event\").head(100).groupby(\"name\").count().sort(\"count\").filter(\n    pl.col(\"count\") &gt; 30\n)\n\n\n\nshape: (10, 2)\n\n\n\nname\ncount\n\n\nstr\nu32\n\n\n\n\n\"Marita Koch\"\n31\n\n\n\"Michael Johnso…\n32\n\n\n\"Genzebe Dibaba…\n32\n\n\n\"Shelly-Ann Fra…\n33\n\n\n\"Eliud Kipchoge…\n36\n\n\n\"Haile Gebrsela…\n37\n\n\n\"Sifan Hassan\"\n38\n\n\n\"Helen Obiri\"\n39\n\n\n\"Usain Bolt\"\n43\n\n\n\"Hicham El Guer…\n49\n\n\n\n\n\n\n\n\nCode\n(\n    df.filter(pl.col(\"event type\") == \"standard\")\n    .filter(~pl.col(\"event\").str.contains(\"walk\"))\n    .sort(\"distance\")\n    .groupby(\"sex\", \"event\", maintain_order=True)\n    .head(20)\n    .groupby(\"sex\", \"event\", \"name\", maintain_order=True)\n    .count()\n    .sort(\"count\")\n    .groupby(\"sex\", \"event\", maintain_order=True)\n    .last()\n    .pivot(\n        index=\"event\",\n        columns=\"sex\",\n        values=[\"name\", \"count\"],\n        aggregate_function=\"first\",\n    )\n    .select(\n        [\n            \"event\",\n            \"name_sex_female\",\n            \"count_sex_female\",\n            \"name_sex_male\",\n            \"count_sex_male\",\n        ]\n    )\n)\n\n\n\nshape: (14, 5)\n\n\n\nevent\nname_sex_female\ncount_sex_female\nname_sex_male\ncount_sex_male\n\n\nstr\nstr\nu32\nstr\nu32\n\n\n\n\n\"100 metres\"\n\"Shelly-Ann Fra…\n9\n\"Usain Bolt\"\n7\n\n\n\"100m/110m hurd…\n\"Yordanka Donko…\n5\n\"Dayron Robles\"\n4\n\n\n\"200 metres\"\n\"Elaine Thompso…\n3\n\"Usain Bolt\"\n7\n\n\n\"400 metres\"\n\"Marita Koch\"\n6\n\"Michael Johnso…\n5\n\n\n\"400m hurdles\"\n\"Sydney McLaugh…\n8\n\"Rai Benjamin\"\n6\n\n\n\"800 metres\"\n\"Caster Semenya…\n4\n\"David Rudisha\"\n10\n\n\n\"1500 metres\"\n\"Faith Kipyegon…\n8\n\"Hicham El Guer…\n10\n\n\n\"1 Mile\"\n\"Sifan Hassan\"\n3\n\"Hicham El Guer…\n8\n\n\n\"3000 metres\"\n\"Ma Liyan\"\n2\n\"Haile Gebrsela…\n4\n\n\n\"3000m steeplec…\n\"Beatrice Chepk…\n6\n\"Saif Saeed Sha…\n8\n\n\n\"5000 metres\"\n\"Almaz Ayana\"\n4\n\"Daniel Komen\"\n3\n\n\n\"10000 metres\"\n\"Sifan Hassan\"\n3\n\"Kenenisa Bekel…\n4\n\n\n\"half-marathon\"\n\"Joyciline Jepk…\n3\n\"Jacob Kiplimo\"\n3\n\n\n\"marathon\"\n\"Ruth Chepngeti…\n3\n\"Eliud Kipchoge…\n5\n\n\n\n\n\n\n\n\nCode\nworld_records.groupby(\"name\").count().sort(\"count\").filter(pl.col(\"count\") &gt; 3)\n\n\n\nshape: (24, 2)\n\n\n\nname\ncount\n\n\nstr\nu32\n\n\n\n\n\"Hicham El Guer…\n4\n\n\n\"Steve Ovett\"\n4\n\n\n\"David Rudisha\"\n4\n\n\n\"Mary Slaney\"\n4\n\n\n\"Saïd Aouita\"\n4\n\n\n\"Anders Gärderu…\n4\n\n\n\"Joshua Chepteg…\n4\n\n\n\"Edwin Moses\"\n4\n\n\n\"Paul Tergat\"\n4\n\n\n\"Noureddine Mor…\n4\n\n\n\"Wang Junxia\"\n4\n\n\n\"Moses Kiptanui…\n4\n\n\n\"Florence Griff…\n4\n\n\n\"Irena Szewinsk…\n4\n\n\n\"Henry Rono\"\n5\n\n\n\"Sydney McLaugh…\n5\n\n\n\"Ron Clarke\"\n5\n\n\n\"Tatyana Kazank…\n5\n\n\n\"Sebastian Coe\"\n6\n\n\n\"Ingrid Kristia…\n6\n\n\n\"Letesenbet Gid…\n6\n\n\n\"Usain Bolt\"\n7\n\n\n\"Haile Gebrsela…\n10\n\n\n\"Marita Koch\"\n11\n\n\n\n\n\n\n\n\nCode\nalt.Chart(\n    world_records.with_columns(pl.col(\"date of event\").dt.year().alias(\"year of event\"))\n    .filter(pl.col(\"rank\") &gt; 0)\n    # .filter(pl.col(\"distance type\") == \"sprint\")\n    .groupby(\"year of event\", \"distance type\", maintain_order=True)\n    .count()\n    .to_pandas()\n).mark_bar().encode(\n    x=alt.X(\"year of event:N\").axis(values=list(range(1950, 2030, 10))),\n    y=\"count:Q\",\n    color=\"distance type:N\",\n)\n\n\n\n\n\n\n\n\n\n\nCode\nworld_records\n\n\n\nshape: (387, 21)\n\n\n\nsex\nevent\nresult seconds\nevent type\ndistance\nrank\nrank in event\nname\nnationality\ndate of birth\nresult\nwind\ndate of event\nlocation of event\ndistance type\nhas hurdles\non track\nfile\nage at event in years\nworld record time\npercent of wr\n\n\nstr\nstr\nf64\nstr\nf64\ni64\nstr\nstr\nstr\ndate\nstr\nstr\ndate\nstr\nstr\nbool\nbool\nstr\nf64\nf64\nf64\n\n\n\n\n\"Female\"\n\"100 metres\"\n11.08\n\"standard\"\n100.0\n2501\n\"1\"\n\"Wyomia Tyus\"\n\"USA\"\n1945-08-29\n\"11.08A\"\n\"+1.2\"\n1968-10-15\n\"Ciudad de Méxi…\n\"sprint\"\nfalse\ntrue\n\"../data/women/…\n23.145205\n11.08\n105.624404\n\n\n\"Female\"\n\"100 metres\"\n11.07\n\"standard\"\n100.0\n2293\n\"1\"\n\"Renate Stecher…\n\"GDR\"\n1950-05-12\n\"11.07\"\n\"-0.2\"\n1972-09-02\n\"München\"\n\"sprint\"\nfalse\ntrue\n\"../data/women/…\n22.326027\n11.07\n105.529075\n\n\n\"Female\"\n\"100 metres\"\n11.04\n\"standard\"\n100.0\n1774\n\"1h1\"\n\"Ingeborg Helte…\n\"FRG\"\n1950-12-31\n\"11.04\"\n\"+0.6\"\n1976-06-13\n\"Fürth\"\n\"sprint\"\nfalse\ntrue\n\"../data/women/…\n25.468493\n11.04\n105.243089\n\n\n\"Female\"\n\"100 metres\"\n11.01\n\"standard\"\n100.0\n1362\n\"1s1\"\n\"Annegret Richt…\n\"FRG\"\n1950-10-13\n\"11.01\"\n\"+0.6\"\n1976-07-25\n\"Montréal\"\n\"sprint\"\nfalse\ntrue\n\"../data/women/…\n25.8\n11.01\n104.957102\n\n\n\"Female\"\n\"100 metres\"\n10.88\n\"standard\"\n100.0\n338\n\"1\"\n\"Marlies Göhr\"\n\"GDR\"\n1958-03-21\n\"10.88\"\n\"+2.0\"\n1977-07-01\n\"Dresden\"\n\"sprint\"\nfalse\ntrue\n\"../data/women/…\n19.293151\n10.88\n103.717827\n\n\n\"Female\"\n\"100 metres\"\n10.81\n\"standard\"\n100.0\n130\n\"1\"\n\"Marlies Göhr\"\n\"GDR\"\n1958-03-21\n\"10.81\"\n\"+1.7\"\n1983-06-08\n\"Berlin\"\n\"sprint\"\nfalse\ntrue\n\"../data/women/…\n25.232877\n10.81\n103.050524\n\n\n\"Female\"\n\"100 metres\"\n10.79\n\"standard\"\n100.0\n104\n\"1\"\n\"Evelyn Ashford…\n\"USA\"\n1957-04-15\n\"10.79A\"\n\"+0.6\"\n1983-07-03\n\"Colorado Sprin…\n\"sprint\"\nfalse\ntrue\n\"../data/women/…\n26.232877\n10.79\n102.859867\n\n\n\"Female\"\n\"100 metres\"\n10.76\n\"standard\"\n100.0\n67\n\"1\"\n\"Evelyn Ashford…\n\"USA\"\n1957-04-15\n\"10.76\"\n\"+1.7\"\n1984-08-22\n\"Zürich\"\n\"sprint\"\nfalse\ntrue\n\"../data/women/…\n27.372603\n10.76\n102.57388\n\n\n\"Female\"\n\"100 metres\"\n10.49\n\"standard\"\n100.0\n1\n\"1q1\"\n\"Florence Griff…\n\"USA\"\n1959-12-21\n\"10.49\"\n\"±0.0\"\n1988-07-16\n\"Indianapolis\"\n\"sprint\"\nfalse\ntrue\n\"../data/women/…\n28.589041\n10.49\n100.0\n\n\n\"Female\"\n\"100m/110m hurd…\n12.59\n\"standard\"\n100.0\n739\n\"1\"\n\"Anneliese Ehrh…\n\"GDR\"\n1950-06-18\n\"12.59\"\n\"-0.6\"\n1972-09-08\n\"München\"\n\"sprint\"\ntrue\ntrue\n\"../data/women/…\n22.241096\n12.59\n103.877888\n\n\n\"Female\"\n\"100m/110m hurd…\n12.48\n\"standard\"\n100.0\n220\n\"1\"\n\"Grazyna Rabszt…\n\"POL\"\n1952-09-20\n\"12.48\"\n\"+1.9\"\n1978-06-10\n\"Fürth\"\n\"sprint\"\ntrue\ntrue\n\"../data/women/…\n25.736986\n12.48\n102.970297\n\n\n\"Female\"\n\"100m/110m hurd…\n12.36\n\"standard\"\n100.0\n43\n\"1\"\n\"Grazyna Rabszt…\n\"POL\"\n1952-09-20\n\"12.36\"\n\"+1.9\"\n1980-06-13\n\"Warszawa\"\n\"sprint\"\ntrue\ntrue\n\"../data/women/…\n27.747945\n12.36\n101.980198\n\n\n…\n…\n…\n…\n…\n…\n…\n…\n…\n…\n…\n…\n…\n…\n…\n…\n…\n…\n…\n…\n…\n\n\n\"Male\"\n\"200 metres\"\n19.19\n\"standard\"\n200.0\n-1\n\"1\"\n\"Usain Bolt\"\n\"JAM\"\n1986-08-21\n\"19.19\"\n\"-0.3\"\n2023-06-07\n\"Berlin\"\n\"sprint\"\nfalse\ntrue\n\"../data/men/st…\n23.013699\n19.19\n100.0\n\n\n\"Male\"\n\"400 metres\"\n43.03\n\"standard\"\n400.0\n-1\n\"1\"\n\"Wayde van Niek…\n\"RSA\"\n1992-07-15\n\"43.03\"\nnull\n2023-06-07\n\"Rio de Janeiro…\n\"sprint\"\nfalse\ntrue\n\"../data/men/st…\n24.09863\n43.03\n100.0\n\n\n\"Male\"\n\"400m hurdles\"\n45.94\n\"standard\"\n400.0\n-1\n\"1\"\n\"Karsten Warhol…\n\"NOR\"\n1996-02-28\n\"45.94\"\nnull\n2023-06-07\n\"Tokyo\"\n\"sprint\"\ntrue\ntrue\n\"../data/men/st…\n25.446575\n45.94\n100.0\n\n\n\"Male\"\n\"800 metres\"\n100.91\n\"standard\"\n800.0\n-1\n\"1\"\n\"David Rudisha\"\n\"KEN\"\n1988-12-17\n\"1:40.91\"\nnull\n2023-06-07\n\"London\"\n\"middle distanc…\nfalse\ntrue\n\"../data/men/st…\n23.660274\n100.91\n100.0\n\n\n\"Male\"\n\"1500 metres\"\n206.0\n\"standard\"\n1500.0\n-1\n\"1\"\n\"Hicham El Guer…\n\"MAR\"\n1974-09-14\n\"3:26.00\"\nnull\n2023-06-07\n\"Roma\"\n\"middle distanc…\nfalse\ntrue\n\"../data/men/st…\n23.846575\n206.0\n100.0\n\n\n\"Male\"\n\"1 Mile\"\n223.13\n\"standard\"\n1609.0\n-1\n\"1\"\n\"Hicham El Guer…\n\"MAR\"\n1974-09-14\n\"3:43.13\"\nnull\n2023-06-07\n\"Roma\"\n\"middle distanc…\nfalse\ntrue\n\"../data/men/st…\n24.827397\n223.13\n100.0\n\n\n\"Male\"\n\"3000 metres\"\n440.67\n\"standard\"\n3000.0\n-1\n\"1\"\n\"Daniel Komen\"\n\"KEN\"\n1976-05-17\n\"7:20.67\"\nnull\n2023-06-07\n\"Rieti\"\n\"middle distanc…\nfalse\ntrue\n\"../data/men/st…\n20.306849\n440.67\n100.0\n\n\n\"Male\"\n\"3000m steeplec…\n473.63\n\"standard\"\n3000.0\n-1\n\"1\"\n\"Saif Saeed Sha…\n\"QAT\"\n1982-10-15\n\"7:53.63\"\nnull\n2023-06-07\n\"Bruxelles\"\n\"middle distanc…\ntrue\ntrue\n\"../data/men/st…\n21.90137\n473.63\n100.0\n\n\n\"Male\"\n\"5000 metres\"\n755.36\n\"standard\"\n5000.0\n-1\n\"1.0\"\n\"Joshua Chepteg…\n\"UGA\"\n1996-09-12\n\"12:35.36\"\nnull\n2023-06-07\n\"Monaco\"\n\"long distance\"\nfalse\ntrue\n\"../data/men/st…\n23.936986\n755.36\n100.0\n\n\n\"Male\"\n\"10000 metres\"\n1571.0\n\"standard\"\n10000.0\n-1\n\"1\"\n\"Joshua Chepteg…\n\"UGA\"\n1996-09-12\n\"26:11.00\"\nnull\n2023-06-07\n\"Valencia\"\n\"long distance\"\nfalse\ntrue\n\"../data/men/st…\n24.084932\n1571.0\n100.0\n\n\n\"Male\"\n\"half-marathon\"\n3451.0\n\"standard\"\n21097.5\n-1\n\"1\"\n\"Jacob Kiplimo\"\n\"UGA\"\n2000-11-14\n\"57:31\"\nnull\n2023-06-07\n\"Lisboa\"\n\"long distance\"\nfalse\nfalse\n\"../data/men/st…\n21.032877\n3451.0\n100.0\n\n\n\"Male\"\n\"marathon\"\n7269.0\n\"standard\"\n42195.0\n-1\n\"1.0\"\n\"Eliud Kipchoge…\n\"KEN\"\n1984-11-05\n\"2:01:09\"\nnull\n2023-06-07\n\"Berlin\"\n\"long distance\"\nfalse\nfalse\n\"../data/men/st…\n37.912329\n7269.0\n100.0"
  },
  {
    "objectID": "notebooks/the_data.html",
    "href": "notebooks/the_data.html",
    "title": "The Data",
    "section": "",
    "text": "We’ll start this analysis by providing a basic overview of the data we have at hand."
  },
  {
    "objectID": "notebooks/the_data.html#credit",
    "href": "notebooks/the_data.html#credit",
    "title": "The Data",
    "section": "Credit",
    "text": "Credit\nAll data comes from Peter Larsson’s website Alltime Athletics and he deserves full credit for the collection that he curates. You should go and check out his website, it’s amazing!\nThe data is scraped and processed using alltime_athletics_python"
  },
  {
    "objectID": "notebooks/the_data.html#a-first-glance-at-the-data",
    "href": "notebooks/the_data.html#a-first-glance-at-the-data",
    "title": "The Data",
    "section": "A first glance at the data",
    "text": "A first glance at the data\nTo get an idea of the data that we will be dealing with, let’s have a look at the first ten rows of the data frame.\nIn total, we have over 170000 rows with 19 columns of data.\n\n\nCode\nimport altair as alt\nimport polars as pl\nfrom alltime_athletics_python.io import import_running_only_events\nfrom camminapy.plot.altair_config import altair_theme\n\nfrom alltime_athletics_viz.show import show_df\n\n# from alltime_athletics_python.io import download_data\n\n\nalt.data_transformers.disable_max_rows()\naltair_theme()\n\n# if not os.path.exists(\"data\"):\n#     download_data()\ndf = import_running_only_events(\"../data\")\n\n\n\n\nCode\nshow_df(df.head(10))\n\n\n\n\n\n\nevent\nevent type\ndistance\nsex\nrank\nrank in event\nname\nnationality\ndate of birth\nresult\nwind\nresult seconds\ndate of event\nlocation of event\ndistance type\nhas hurdles\non track\nfile\nage at event in years\n\n\n\n\n0\n100 metres\nstandard\n100.0\nfemale\n1\n1q1\nFlorence Griffith-Joyner\nUSA\n1959-12-21\n10.49\n±0.0\n10.49\n1988-07-16\nIndianapolis\nsprint\nFalse\nTrue\n../data/women/standard/100 metres/legal/0 all-time women's best 100m.csv\n28.589041\n\n\n1\n100 metres\nstandard\n100.0\nfemale\n2\n1\nElaine Thompson-Herah\nJAM\n1992-06-28\n10.54\n+0.9\n10.54\n2021-08-21\nEugene\nsprint\nFalse\nTrue\n../data/women/standard/100 metres/legal/0 all-time women's best 100m.csv\n29.167123\n\n\n2\n100 metres\nstandard\n100.0\nfemale\n3\n1rA\nShelly-Ann Fraser-Pryce\nJAM\n1986-12-27\n10.60\n+1.7\n10.60\n2021-08-26\nLausanne\nsprint\nFalse\nTrue\n../data/women/standard/100 metres/legal/0 all-time women's best 100m.csv\n34.687671\n\n\n3\n100 metres\nstandard\n100.0\nfemale\n4\n1\nFlorence Griffith-Joyner\nUSA\n1959-12-21\n10.61\n+1.2\n10.61\n1988-07-17\nIndianapolis\nsprint\nFalse\nTrue\n../data/women/standard/100 metres/legal/0 all-time women's best 100m.csv\n28.591781\n\n\n4\n100 metres\nstandard\n100.0\nfemale\n4\n1\nElaine Thompson-Herah\nJAM\n1992-06-28\n10.61\n-0.6\n10.61\n2021-07-31\nTokyo\nsprint\nFalse\nTrue\n../data/women/standard/100 metres/legal/0 all-time women's best 100m.csv\n29.109589\n\n\n5\n100 metres\nstandard\n100.0\nfemale\n6\n1q3\nFlorence Griffith-Joyner\nUSA\n1959-12-21\n10.62\n+1.0\n10.62\n1988-09-24\nSeoul\nsprint\nFalse\nTrue\n../data/women/standard/100 metres/legal/0 all-time women's best 100m.csv\n28.780822\n\n\n6\n100 metres\nstandard\n100.0\nfemale\n6\n1\nShelly-Ann Fraser-Pryce\nJAM\n1986-12-27\n10.62\n+0.4\n10.62\n2022-08-10\nMonaco\nsprint\nFalse\nTrue\n../data/women/standard/100 metres/legal/0 all-time women's best 100m.csv\n35.643836\n\n\n7\n100 metres\nstandard\n100.0\nfemale\n8\n1rA\nShelly-Ann Fraser-Pryce\nJAM\n1986-12-27\n10.63\n+1.3\n10.63\n2021-06-05\nKingston\nsprint\nFalse\nTrue\n../data/women/standard/100 metres/legal/0 all-time women's best 100m.csv\n34.463014\n\n\n8\n100 metres\nstandard\n100.0\nfemale\n9\n1\nCarmelita Jeter\nUSA\n1979-11-24\n10.64\n+1.2\n10.64\n2009-09-20\nShanghai\nsprint\nFalse\nTrue\n../data/women/standard/100 metres/legal/0 all-time women's best 100m.csv\n29.843836\n\n\n9\n100 metres\nstandard\n100.0\nfemale\n9\n2rA\nElaine Thompson-Herah\nJAM\n1992-06-28\n10.64\n+1.7\n10.64\n2021-08-26\nLausanne\nsprint\nFalse\nTrue\n../data/women/standard/100 metres/legal/0 all-time women's best 100m.csv\n29.180822\n\n\n\n\n\nWe have data from 36 events with different numbers of entries inside the database\n\n\nCode\npl.Config.set_tbl_rows(100)\nshow_df(\n    df.sort(\"distance\")\n    .groupby(\"event\", \"sex\", maintain_order=True)\n    .count()\n    .pivot(index=\"event\", columns=\"sex\", values=\"count\", aggregate_function=\"first\")\n    .fill_null(0)\n)\n\n\n\n\n\n\nevent\nfemale\nmale\n\n\n\n\n0\n60 metres\n2677\n3112\n\n\n1\n100 yards\n0\n107\n\n\n2\n100 metres\n2842\n3967\n\n\n3\n100m/110m hurdles\n1849\n8617\n\n\n4\n200 metres\n2303\n4278\n\n\n5\n200m hurdles\n0\n29\n\n\n6\n300 metres\n257\n522\n\n\n7\n400 metres\n3491\n4317\n\n\n8\n400m hurdles\n2694\n3870\n\n\n9\n600 metres\n122\n134\n\n\n10\n800 metres\n2123\n7823\n\n\n11\n1000 metres\n191\n261\n\n\n12\n1500 metres\n3081\n9632\n\n\n13\n1 Mile\n331\n5359\n\n\n14\n2000 metres\n133\n278\n\n\n15\n2000m steeplechase\n718\n402\n\n\n16\n3000 metres\n1310\n4053\n\n\n17\n3000m steeplechase\n26440\n9976\n\n\n18\n2 Miles\n148\n386\n\n\n19\nOne hour run\n0\n221\n\n\n20\n5000 metres\n4474\n8368\n\n\n21\n5000 metres track walk\n321\n0\n\n\n22\n10000 metres\n2318\n9490\n\n\n23\n10 km race walk\n443\n0\n\n\n24\n10km road\n974\n766\n\n\n25\n10000 meters track walk\n0\n495\n\n\n26\n15km road\n898\n1157\n\n\n27\n20 km race walk\n3727\n1483\n\n\n28\n20km road\n2063\n1753\n\n\n29\nhalf-marathon\n3015\n3145\n\n\n30\n25 000m track\n0\n78\n\n\n31\n30km road\n2995\n2696\n\n\n32\n30 000m track\n0\n61\n\n\n33\nmarathon\n4389\n4851\n\n\n34\n50 km race walk\n262\n1035\n\n\n35\n100km road\n0\n195\n\n\n\n\n\nHere’s how the data splits up among the sexes.\n\n\nCode\nshow_df(df.groupby(\"sex\").count())\n\n\n\n\n\n\nsex\ncount\n\n\n\n\n0\nfemale\n76589\n\n\n1\nmale\n102917\n\n\n\n\n\nThere is data from standard and special events.\nHere are the standard events.\n\n\nCode\nshow_df(\n    pl.DataFrame(\n        df.filter(pl.col(\"event type\") == \"standard\")[\"event\"].unique(\n            maintain_order=True\n        )\n    )\n)\n\n\n\n\n\n\nevent\n\n\n\n\n0\n100 metres\n\n\n1\n100m/110m hurdles\n\n\n2\n200 metres\n\n\n3\n400 metres\n\n\n4\n400m hurdles\n\n\n5\n800 metres\n\n\n6\n1500 metres\n\n\n7\n1 Mile\n\n\n8\n3000 metres\n\n\n9\n3000m steeplechase\n\n\n10\n5000 metres\n\n\n11\n10000 metres\n\n\n12\n20 km race walk\n\n\n13\nhalf-marathon\n\n\n14\nmarathon\n\n\n15\n50 km race walk\n\n\n\n\n\nAnd here are the counts for the standard and special events.\n\n\nCode\nshow_df(df.groupby(\"event type\").count())\n\n\n\n\n\n\nevent type\ncount\n\n\n\n\n0\nspecial\n24593\n\n\n1\nstandard\n154913\n\n\n\n\n\nLet’s finish off this basic inspection by checking whether the world records look correct.\n\n\nCode\nshow_df(\n    df.filter(pl.col(\"rank\") == 1)\n    .filter(pl.col(\"event type\") == \"standard\")\n    .select(\"event\", \"name\", \"result\", \"sex\")\n    .pivot(\n        index=\"event\",\n        values=[\"name\", \"result\"],\n        columns=\"sex\",\n        aggregate_function=\"first\",\n    )\n    .select(\n        \"event\",\n        \"name_sex_female\",\n        \"result_sex_female\",\n        \"name_sex_male\",\n        \"result_sex_male\",\n    )\n)\n\n\n\n\n\n\nevent\nname_sex_female\nresult_sex_female\nname_sex_male\nresult_sex_male\n\n\n\n\n0\n100 metres\nFlorence Griffith-Joyner\n10.49\nUsain Bolt\n9.58\n\n\n1\n100m/110m hurdles\nOluwatobiloba Amusan\n12.12\nAries Merritt\n12.80\n\n\n2\n200 metres\nFlorence Griffith-Joyner\n21.34\nUsain Bolt\n19.19\n\n\n3\n400 metres\nMarita Koch\n47.60\nWayde van Niekerk\n43.03\n\n\n4\n400m hurdles\nSydney McLaughlin\n50.68\nKarsten Warholm\n45.94\n\n\n5\n800 metres\nJarmila Kratochvílová\n1:53.28\nDavid Rudisha\n1:40.91\n\n\n6\n1500 metres\nFaith Kipyegon\n3:49.11\nHicham El Guerrouj\n3:26.00\n\n\n7\n1 Mile\nSifan Hassan\n4:12.33\nHicham El Guerrouj\n3:43.13\n\n\n8\n3000 metres\nWang Junxia\n8:06.11\nDaniel Komen\n7:20.67\n\n\n9\n3000m steeplechase\nBeatrice Chepkoech\n8:44.32\nSaif Saeed Shaheen\n7:53.63\n\n\n10\n5000 metres\nLetesenbet Gidey\n14:06.62\nJoshua Cheptegei\n12:35.36\n\n\n11\n10000 metres\nLetesenbet Gidey\n29:01.03\nJoshua Cheptegei\n26:11.00\n\n\n12\n20 km race walk\nYelena Lashmanova\n1:23:39\nYusuke Suzuki\n1:16:36\n\n\n13\nhalf-marathon\nLetesenbet Gidey\n62:52\nJacob Kiplimo\n57:31\n\n\n14\nmarathon\nBrigid Kosgei\n2:14:04\nEliud Kipchoge\n2:01:09\n\n\n15\n50 km race walk\nYelena Lashmanova\n3:50:42\nYohann Diniz\n3:32:33\n\n\n\n\n\nThis does indeed look right and even includes the most recent world record over the 1500m by Faith Kipyegon."
  }
]
